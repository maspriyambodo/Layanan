
-- --------------------------------------------------------

--
-- Structure for view `detail_dai_luar`
--
DROP TABLE IF EXISTS `detail_dai_luar`;

DROP VIEW IF EXISTS `detail_dai_luar`;
CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `detail_dai_luar`  AS SELECT `sys_users`.`fullname` AS `nama_user`, `sys_users`.`nik` AS `nik`, `sys_users`.`tgl_lhr` AS `tgl_lhr`, `sys_users`.`telp` AS `telp`, `sys_users`.`email` AS `mail`, `dt_kegiatan`.`nm_keg` AS `nm_keg`, `dt_kegiatan`.`tgl_akhir_keg` AS `tgl_akhir_keg`, `dt_kegiatan`.`tgl_awal_keg` AS `tgl_awal_keg`, `dt_kegiatan`.`lemb_keg` AS `lemb_keg`, `dt_kegiatan`.`esti_keg` AS `esti_keg`, `dt_kegiatan`.`alamat_keg` AS `alamat_keg`, `dt_penceramah`.`narsum` AS `narsum`, `prov_layanan`.`nama` AS `provinsi_layanan`, `prov_layanan`.`id_provinsi` AS `provinsi_id_layanan`, `kab_layanan`.`nama` AS `kabupaten_layanan`, `kab_layanan`.`id_kabupaten` AS `kabupaten_id_layanan`, `kec_layanan`.`nama` AS `kecamatan_layanan`, `kec_layanan`.`id_kecamatan` AS `kecamatan_id_layanan`, `kel_layanan`.`nama` AS `kelurahan_layanan`, `kel_layanan`.`id_kelurahan` AS `kelurahan_id_layanan`, `dt_layanan`.`keterangan` AS `keterangan`, `dt_layanan`.`id` AS `id_layanan`, `dt_layanan`.`id_stat` AS `stat_id`, lpad(`mt_direktorat`.`id`,2,0) AS `no_direktorat`, lpad(`mt_layanan`.`id`,2,0) AS `no_layanan`, lpad(`dt_layanan`.`id`,4,0) AS `no_urut`, date_format(`dt_layanan`.`syscreatedate`,'%m.%Y') AS `tgl_input`, `dt_layanan`.`alasan_tolak` AS `alasan_tolak`, `sys_users`.`id` AS `id_user`, `dt_layanan`.`stat` AS `status_aktif`, `mt_status_layanan`.`nama_stat` AS `nama_stat`, `dt_layanan_dokumen`.`surat_permohonan_luar` AS `sp_keg`, `dt_layanan_dokumen`.`proposal_luar` AS `proposal_keg`, `dt_penceramah`.`id` AS `id_penceramah`, `dt_penceramah`.`tmp_lhr` AS `tmp_lahir_narsum`, `dt_penceramah`.`tgl_lhr` AS `tgl_lahir_narsum`, (case when (`dt_penceramah`.`jns_kelamin` = 1) then 'laki-laki' else 'perempuan' end) AS `jns_kelamin`, `prov_narsum`.`nama` AS `prov_narsum`, `dt_penceramah`.`id_provinsi` AS `provinsi_id_narsum`, `kab_narsum`.`nama` AS `kab_narsum`, `dt_penceramah`.`id_kabupaten` AS `kabupaten_id_narsum`, `kec_narsum`.`nama` AS `kec_narsum`, `dt_penceramah`.`id_kecamatan` AS `kecamatan_id_narsum`, `kel_narsum`.`nama` AS `kel_narsum`, `dt_penceramah`.`id_kelurahan` AS `kelurahan_id_narsum`, `dt_penceramah`.`no_paspor` AS `no_paspor`, `dt_penceramah`.`almt_penceramah` AS `almt_penceramah`, `dt_penceramah`.`cv` AS `cv`, `dt_penceramah`.`fc_passport` AS `fc_passport`, `dt_penceramah`.`pas_foto` AS `pas_foto`, `mt_country`.`country` AS `negara_tujuan` FROM ((((((((((`dt_layanan_dokumen` left join (`dt_penceramah` left join (`dt_kegiatan` left join (`mt_direktorat` left join (`mt_layanan` left join (`mt_status_layanan` left join (`sys_users` left join `dt_layanan` on((`dt_layanan`.`id_user` = `sys_users`.`id`))) on((`dt_layanan`.`id_stat` = `mt_status_layanan`.`id`))) on((`dt_layanan`.`jenis_layanan` = `mt_layanan`.`id`))) on((`mt_layanan`.`jenis_layanan` = `mt_direktorat`.`id`))) on((`dt_kegiatan`.`id_layanan` = `dt_layanan`.`id`))) on((`dt_penceramah`.`id_layanan` = `dt_layanan`.`id`))) on((`dt_layanan`.`id` = `dt_layanan_dokumen`.`id_layanan`))) left join `mt_wil_provinsi` `prov_layanan` on((`dt_layanan`.`id_provinsi` = `prov_layanan`.`id_provinsi`))) left join `mt_wil_provinsi` `prov_narsum` on((`dt_penceramah`.`id_provinsi` = `prov_narsum`.`id_provinsi`))) left join `mt_wil_kabupaten` `kab_layanan` on(((`dt_layanan`.`id_kabupaten` = `kab_layanan`.`id_kabupaten`) and (`kab_layanan`.`id_provinsi` = `prov_layanan`.`id_provinsi`)))) left join `mt_wil_kabupaten` `kab_narsum` on((`dt_penceramah`.`id_kabupaten` = `kab_narsum`.`id_kabupaten`))) left join `mt_wil_kecamatan` `kec_layanan` on(((`dt_layanan`.`id_kecamatan` = `kec_layanan`.`id_kecamatan`) and (`kec_layanan`.`id_kabupaten` = `kab_layanan`.`id_kabupaten`)))) join `mt_wil_kecamatan` `kec_narsum` on((`dt_penceramah`.`id_kecamatan` = `kec_narsum`.`id_kecamatan`))) left join `mt_wil_kelurahan` `kel_layanan` on(((`dt_layanan`.`id_kelurahan` = `kel_layanan`.`id_kelurahan`) and (`kel_layanan`.`id_kecamatan` = `kec_layanan`.`id_kecamatan`)))) left join `mt_wil_kelurahan` `kel_narsum` on((`dt_penceramah`.`id_kelurahan` = `kel_narsum`.`id_kelurahan`))) left join `mt_country` on((`dt_kegiatan`.`code_negara` = `mt_country`.`id`))) ;
